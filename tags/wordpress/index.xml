<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>WordPress on J√©r√©mie Litzler</title><link>https://jeremielitzLer.fr/tags/wordpress/</link><description>Recent content in WordPress on J√©r√©mie Litzler</description><generator>Hugo -- gohugo.io</generator><language>fr-fr</language><lastBuildDate>Mon, 26 Feb 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://jeremielitzLer.fr/tags/wordpress/index.xml" rel="self" type="application/rss+xml"/><item><title>Comment migrer un site WordPress vers Microsoft Azure ?</title><link>https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/</link><pubDate>Mon, 26 Feb 2024 00:00:00 +0000</pubDate><guid>https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/</guid><description>&lt;img src="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/wordpress-app-service-diagram.png" alt="Featured image of post Comment migrer un site WordPress vers Microsoft Azure ?" />&lt;h2 id="conditions-pr√©alables">Conditions pr√©alables&lt;/h2>
&lt;p>Pour commencer, vous devez :&lt;/p>
&lt;ul>
&lt;li>disposer d‚Äôun compte et d‚Äôun abonnement sur Microsoft Azure. Il peut s‚Äôagir d‚Äôun essai gratuit ou d‚Äôun parrainage de Microsoft pour les associations.&lt;/li>
&lt;li>pouvoir acc√©der √† l‚Äôh√©bergement source √† partir duquel vous voulez migrer.&lt;/li>
&lt;li>pouvoir installer le plugin &lt;code>All-In-One WP Migration&lt;/code> sur le site source pour migrer son contenu.&lt;/li>
&lt;/ul>
&lt;h2 id="cr√©er-le-service-dapplication-ou-app-service">Cr√©er le service d‚Äôapplication (ou App Service)&lt;/h2>
&lt;p>L‚Äôarchitecture du service d‚Äôapplication WordPress sur Microsoft Azure est la suivante :&lt;/p>
&lt;p>
&lt;img src="https://jeremielitzLer.fr/images/wordpress-app-service-diagramme-avec-soulignements.png"
loading="lazy"
alt="Diagramme de Microsoft Learn"
>
&lt;/p>
&lt;p>Cr√©dit : image tir√©e de &lt;a href="https://learn.microsoft.com/en-us/azure/architecture/example-scenario/infrastructure/wordpress-app-service">cet article&lt;/a> sur Microsoft Learn.&lt;/p>
&lt;p>Nous allons nous concentrer sur l‚Äô&lt;strong>App Service&lt;/strong> et le &lt;strong>Serveur flexible Azure Database avec MySQL&lt;/strong>.&lt;/p>
&lt;p>Je mentionnerai le compte de stockage, mais je n‚Äôentrerai pas dans les d√©tails.&lt;/p>
&lt;p>Donc, √† partir du &lt;a href="https://portal.azure.com/#home">Portail&lt;/a>,&lt;/p>
&lt;ol>
&lt;li>Vous s√©lectionnez &lt;code>Cr√©er une ressource&lt;/code>&lt;/li>
&lt;li>J‚Äôai suivi le &lt;a href="https://learn.microsoft.com/en-us/azure/app-service/migrate-wordpress">guide Microsoft sur la migration WordPress&lt;/a> et voici les √©tapes r√©sum√©es en 5¬†√©tapes :&lt;/li>
&lt;/ol>
&lt;p>
&lt;img src="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-1.jpg"
width="1920"
height="861"
srcset="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-1_hu7d1e3904949ddf7da0054ae7534645fe_416343_360x0_resize_q75_box.jpg 360w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-1_hu7d1e3904949ddf7da0054ae7534645fe_416343_600x0_resize_q75_box.jpg 600w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-1_hu7d1e3904949ddf7da0054ae7534645fe_416343_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="√âtape¬†1 : s√©lectionner le mod√®le de service d‚Äôapplication"
class="gallery-image"
data-flex-grow="222"
data-flex-basis="535px"
>
&lt;/p>
&lt;div class="jli-notice jli-notice-tip" id="Tip" >
&lt;p class="jli-notice-title">Tip&lt;/p>&lt;p>Utilisez l‚Äôoption officielle &lt;code>Microsoft App Service&lt;/code>.&lt;/p>&lt;/div>
&lt;p>
&lt;img src="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-2.jpg"
width="1899"
height="1435"
srcset="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-2_hudc96a6c55382978722c8f86ce65f8319_432845_360x0_resize_q75_box.jpg 360w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-2_hudc96a6c55382978722c8f86ce65f8319_432845_600x0_resize_q75_box.jpg 600w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-2_hudc96a6c55382978722c8f86ce65f8319_432845_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="√âtape¬†2 : d√©finir le projet. Cela inclut o√π est h√©berg√© le serveur (zone g√©ographique), quelle sera sa taille et le compte d‚Äôidentification WordPress initial."
class="gallery-image"
data-flex-grow="132"
data-flex-basis="317px"
>
&lt;/p>
&lt;div class="jli-notice jli-notice-tip" id="Les √©tapes importantes ici sont :" >
&lt;p class="jli-notice-title">Les √©tapes importantes ici sont :&lt;/p>&lt;ul>
&lt;li>cr√©er un nouveau groupe de ressources pour organiser les ressources cr√©√©es, par exemple avec le &lt;code>RG_Websites_Ressources&lt;/code>.&lt;/li>
&lt;li>s√©lectionner la taille initiale du plan App Service, en commen√ßant par le plan gratuit.&lt;/li>
&lt;/ul>
&lt;p>N.B. Si vous effectuez une migration, le compte d‚Äôadministration WordPress initial n‚Äôest pas important. Vous le remplacerez dans les √©tapes ult√©rieures avec celui du site √† migrer.&lt;/p>&lt;/div>
&lt;div class="jli-notice jli-notice-warning" id="La taille gratuite peut √™tre trop petite..." >
&lt;p class="jli-notice-title">La taille gratuite peut √™tre trop petite...&lt;/p>&lt;/div>
&lt;p>
&lt;img src="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-3.jpg"
width="1912"
height="1509"
srcset="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-3_hu8ec7fb9bd2c262866eb480e17f6a7465_556052_360x0_resize_q75_box.jpg 360w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-3_hu8ec7fb9bd2c262866eb480e17f6a7465_556052_600x0_resize_q75_box.jpg 600w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-3_hu8ec7fb9bd2c262866eb480e17f6a7465_556052_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="√âtape¬†3 : s√©lectionner les compl√©ments"
class="gallery-image"
data-flex-grow="126"
data-flex-basis="304px"
>
&lt;/p>
&lt;div class="jli-notice jli-notice-tip" id="Dans mon cas..." >
&lt;p class="jli-notice-title">Dans mon cas...&lt;/p>&lt;p>J‚Äôai &lt;strong>tout d√©coch√©&lt;/strong>, &lt;em>comme le montre la capture d‚Äô√©cran&lt;/em>.&lt;/p>
&lt;p>Si vous avez besoin de cr√©er un compte de stockage, vous pouvez le faire ult√©rieurement.&lt;/p>&lt;/div>
&lt;p>
&lt;img src="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-4.jpg"
width="1920"
height="530"
srcset="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-4_hu8ec7fb9bd2c262866eb480e17f6a7465_181828_360x0_resize_q75_box.jpg 360w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-4_hu8ec7fb9bd2c262866eb480e17f6a7465_181828_600x0_resize_q75_box.jpg 600w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-4_hu8ec7fb9bd2c262866eb480e17f6a7465_181828_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="√âtape¬†4 : ajouter un emplacement de stockage"
class="gallery-image"
data-flex-grow="362"
data-flex-basis="869px"
>
&lt;/p>
&lt;div class="jli-notice jli-notice-note" id="Ceci n&amp;#39;est pas n√©cessaire pour le moment." >
&lt;p class="jli-notice-title">Ceci n&amp;#39;est pas n√©cessaire pour le moment.&lt;/p>&lt;/div>
&lt;p>
&lt;img src="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-5.jpg"
width="1920"
height="861"
srcset="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-5_hu8ec7fb9bd2c262866eb480e17f6a7465_222343_360x0_resize_q75_box.jpg 360w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-5_hu8ec7fb9bd2c262866eb480e17f6a7465_222343_600x0_resize_q75_box.jpg 600w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-step-5_hu8ec7fb9bd2c262866eb480e17f6a7465_222343_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="√âtape¬†5 : ajouter des √©tiquettes"
class="gallery-image"
data-flex-grow="222"
data-flex-basis="535px"
>
&lt;/p>
&lt;div class="jli-notice jli-notice-tip" id="Etiquettage des ressources" >
&lt;p class="jli-notice-title">Etiquettage des ressources&lt;/p>&lt;p>Je pense qu‚Äôil est important d‚Äô√©tiqueter les ressources que vous √™tes sur le point de cr√©er pour les organiser.&lt;/p>&lt;/div>
&lt;p>
&lt;img src="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-summary.jpg"
width="1920"
height="1711"
srcset="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-summary_hu7d1e3904949ddf7da0054ae7534645fe_404886_360x0_resize_q75_box.jpg 360w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-summary_hu7d1e3904949ddf7da0054ae7534645fe_404886_600x0_resize_q75_box.jpg 600w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/create-app-service-with-new-plan-summary_hu7d1e3904949ddf7da0054ae7534645fe_404886_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="R√©sum√© avant cr√©ation"
class="gallery-image"
data-flex-grow="112"
data-flex-basis="269px"
>
&lt;/p>
&lt;div class="jli-notice jli-notice-note" id="" >
&lt;p class="jli-notice-title">&lt;/p>&lt;p>La cr√©ation des ressources prend un certain temps. Faites une pause et revenez dans 15-20¬†minutes.&lt;/p>&lt;/div>
&lt;h2 id="nettoyer-les-ressources">Nettoyer les ressources&lt;/h2>
&lt;p>Pour voir toutes les ressources que vous venez de cr√©er, allez sur &lt;a href="https://portal.azure.com/#home">la page d‚ÄôAccueil&lt;/a> et s√©lectionnez la tuile &lt;code>Groupes de ressources&lt;/code>.&lt;/p>
&lt;p>
&lt;img src="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/access-resource-group-from-home.jpg"
width="1396"
height="350"
srcset="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/access-resource-group-from-home_huaea79c5c709c3fb3a875e90223da5611_114193_360x0_resize_q75_box.jpg 360w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/access-resource-group-from-home_huaea79c5c709c3fb3a875e90223da5611_114193_600x0_resize_q75_box.jpg 600w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/access-resource-group-from-home_huaea79c5c709c3fb3a875e90223da5611_114193_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="Acc√©der aux groupes de ressources"
class="gallery-image"
data-flex-grow="398"
data-flex-basis="957px"
>
&lt;/p>
&lt;p>Ensuite, s√©lectionnez le groupe de ressources que vous avez cr√©√© pr√©c√©demment, par exemple &lt;code>RG_Websites_Ressources&lt;/code>.&lt;/p>
&lt;p>Lorsque vous cr√©ez un &lt;em>App Service&lt;/em> en utilisant le mod√®le de Microsoft Azure, il cr√©e un peu trop de ressources.&lt;/p>
&lt;p>Je n‚Äôai pas not√© toutes celles que j‚Äôai supprim√©es, alors laissez-moi vous montrer celles que vous devez conserver :&lt;/p>
&lt;ul>
&lt;li>Un compte de stockage, si vous l‚Äôavez cr√©√©.&lt;/li>
&lt;li>Un &lt;em>App Service&lt;/em> par site web&lt;/li>
&lt;li>Une instance de base de donn√©es par &lt;em>App Service&lt;/em>&lt;/li>
&lt;li>Un r√©seau virtuel&lt;/li>
&lt;/ul>
&lt;p>Si vous cr√©ez plusieurs &lt;em>App Services&lt;/em> en utilisant la m√©thode de l‚Äô√©tape pr√©c√©dente, vous vous retrouverez avec beaucoup de ressources.&lt;/p>
&lt;p>De plus, vous aurez un abonnement d‚Äô&lt;em>App Service&lt;/em> par cr√©ation, ce qui n‚Äôest pas forc√©ment ce que vous souhaitez. Par exemple, sur le projet auquel j‚Äôai particip√©, 2 &lt;em>App Services&lt;/em> fonctionnent en utilisant un seul abonnement d‚Äô&lt;em>App Services&lt;/em>.&lt;/p>
&lt;p>Il est facile de cr√©er un nouveau &lt;em>App Service&lt;/em> √† partir d‚Äôun service existant.&lt;/p>
&lt;p>Les seules ressources distinctes dont vous avez besoin sont un &lt;em>App Service&lt;/em> et une instance de serveur MySQL (et m√™me celle-ci peut √™tre partag√©e entre les services applicatifs, mais je n‚Äôai pas rencontr√© ce sc√©nario).&lt;/p>
&lt;h2 id="dimensionner-les-ressources-correctement">Dimensionner les ressources correctement&lt;/h2>
&lt;p>La bonne nouvelle est que vous pouvez redimensionner le &lt;em>App Service&lt;/em> et/ou le serveur MySQL apr√®s leur cr√©ation respective. Et cela ne prend &lt;em>que&lt;/em> quelques clics.&lt;/p>
&lt;p>Dans mon cas, j‚Äôavais 2¬†sites web et l‚Äôun √©tait significativement plus grand que l‚Äôautre.&lt;/p>
&lt;p>Pour modifier la taille du service d‚Äôapplication, il suffit de :&lt;/p>
&lt;ul>
&lt;li>Naviguer jusqu‚Äô√† la ressource &lt;em>App Service&lt;/em> cibl√©e.&lt;/li>
&lt;li>S√©lectionnez la lame &lt;code>Scale up (app service Plan)&lt;/code>.&lt;/li>
&lt;li>S√©lectionnez la taille souhait√©e.&lt;/li>
&lt;li>Confirmez en cliquant sur le bouton &lt;code>Select&lt;/code>.&lt;/li>
&lt;/ul>
&lt;p>Pour modifier la ressource du serveur MySQL :&lt;/p>
&lt;ul>
&lt;li>Naviguez jusqu‚Äô√† la ressource.&lt;/li>
&lt;li>S√©lectionnez dans le menu vertical &lt;code>Compute + storage&lt;/code>.&lt;/li>
&lt;li>S√©lectionnez le type : soit &lt;code>Burstable&lt;/code>, &lt;code>General Purpose&lt;/code> ou &lt;code>Business Critical&lt;/code>.&lt;/li>
&lt;li>S√©lectionnez la taille.&lt;/li>
&lt;li>Ajustez la taille du stockage (le minimum de 20¬†Go est largement suffisant).&lt;/li>
&lt;li>Ajustez les param√®tres de sauvegarde si n√©cessaire. Personnellement, je n‚Äôai rien modifi√©.&lt;/li>
&lt;li>Confirmez en cliquant sur le bouton &lt;code>Save&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="activer-http2">Activer HTTP/2&lt;/h2>
&lt;p>Avec WordPress, les th√®mes et les extensions peuvent g√©n√©rer un grand nombre de requ√™tes √† chaque chargement de page. HTTP/2 tire parti de la technologie pour optimiser cela et abandonner la strat√©gie de regroupement des ressources JavaScript et/ou CSS que nous avons utilis√©e avec les serveurs¬†HTTP/1.1 par le pass√©.&lt;/p>
&lt;p>Microsoft a annonc√© la prise en charge de HTTP/2 dans &lt;a href="https://azure.microsoft.com/fr-fr/blog/announcing-http-2-support-in-azure-app-service/">cet article&lt;/a>, le 27¬†mars 2018.&lt;/p>
&lt;p>Pour l‚Äôactiver, voici les √©tapes √† suivre :&lt;/p>
&lt;ul>
&lt;li>Allez dans l‚Äô&lt;em>App Service&lt;/em>.&lt;/li>
&lt;li>S√©lectionnez le menu &lt;em>Configuration&lt;/em>, puis l‚Äôonglet &lt;em>General Settings&lt;/em>.&lt;/li>
&lt;li>Faites d√©filer vers le bas pour trouver le param√®tre HTTP/2 et r√©glez-le sur &lt;code>2.0&lt;/code>.&lt;/li>
&lt;li>Sauvegardez et red√©marrez l‚Äô&lt;em>App Service&lt;/em>.&lt;/li>
&lt;/ul>
&lt;p>Vous pouvez √©galement trouver la configuration brute de l‚Äô&lt;em>App Service&lt;/em> dans &lt;a href="https://resources.azure.com">Azure Resource Explorer&lt;/a>, mais il est plus d√©licat de l‚Äô√©diter.&lt;/p>
&lt;p>Si vous √™tes int√©ress√©s, rendez-vous sous &lt;em>subscriptions &amp;gt; Microsoft Azure Sponsorship &amp;gt; resourceGroup &amp;gt; RG-YourOrg-Websites &amp;gt; providers &amp;gt; Microsoft.Web &amp;gt; sites &amp;gt; YourWebsiteName (c‚Äôest-√†-dire le nom de votre ____App Service&lt;/em>.&lt;/p>
&lt;h2 id="migrer-de-lh√©bergement-mutualis√©-vers-microsoft-azure">Migrer de l‚Äôh√©bergement mutualis√© vers Microsoft Azure&lt;/h2>
&lt;p>C‚Äô√©tait la t√¢che principale.&lt;/p>
&lt;p>Alors que j‚Äôavais commenc√© √† effectuer la migration en utilisant &lt;a href="https://learn.microsoft.com/en-us/azure/app-service/migrate-wordpress#manual-migration-process">la m√©thode manuelle&lt;/a> pour plus de flexibilit√©, j‚Äôai d√ª revenir √† &lt;a href="https://learn.microsoft.com/en-us/azure/app-service/migrate-wordpress#migrate-wordpress-with-all-in-one-wp-migration-plugin">la m√©thode utilisant l‚Äôextension&lt;/a>.&lt;/p>
&lt;p>Pourquoi ?&lt;/p>
&lt;p>L‚Äôextension &lt;a href="https://www.advancedcustomfields.com/">Advanced Custom Fields&lt;/a> ne fonctionnait pas apr√®s avoir effectu√© les √©tapes manuelles. Ce n‚Äô√©tait pas possible de s‚Äôen passer, car le site web existant l‚Äôutilisait beaucoup.&lt;/p>
&lt;p>Apr√®s quelques tentatives pour trouver la cause, j‚Äôai finalement migr√© le site web en utilisant l‚Äôextension &lt;code>All-In-One WP Migration&lt;/code>.&lt;/p>
&lt;p>Les √©tapes restent assez simples et rien ne manque dans le guide.&lt;/p>
&lt;p>En ce qui concerne les actions apr√®s la migration, ce que Microsoft √©num√®re est √† peu pr√®s ce que j‚Äôai fait :&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Rechercher et remplacer (chemins et domaines) en utilisant &lt;a href="https://wordpress.org/plugins/better-search-replace/">l‚Äôextension &lt;em>Better Replace&lt;/em>&lt;/a> pour utiliser le domaine temporaire (par ex. : &lt;code>mywebsite.azurewebsites.net&lt;/code>; √† vous d‚Äôajuster √† votre besoin).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Configurez le domaine personnalis√© une fois que nous avons v√©rifi√© que toutes les fonctionnalit√©s fonctionnent et que les pages utilisent bien toutes le domaine temporaire.&lt;/p>
&lt;ul>
&lt;li>Pour configurer votre site avec un domaine personnalis√©, suivez les √©tapes d√©crites dans &lt;a href="https://learn.microsoft.com/en-us/azure/app-service/app-service-web-tutorial-custom-domain">le guide ¬´¬†Map existing custom DNS name¬†¬ª&lt;/a>.&lt;/li>
&lt;/ul>
&lt;div class="jli-notice jli-notice-warning" id="Vous devrez acc√©der √† l&amp;#39;√©diteur de la zone DNS pour cette √©tape ‚¨ÜÔ∏è. Votre gestionnaire de domaines devrait vous donner acc√®s √† cela." >
&lt;p class="jli-notice-title">Vous devrez acc√©der √† l&amp;#39;√©diteur de la zone DNS pour cette √©tape ‚¨ÜÔ∏è. Votre gestionnaire de domaines devrait vous donner acc√®s √† cela.&lt;/p>&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Mettre √† jour les certificats SSL : une fois que Microsoft Azure dessert le domaine, allez le menu &lt;code>Custom domains&lt;/code> dans l‚Äô&lt;em>App Service&lt;/em> et d‚Äôajouter le type &lt;code>SNI SSL&lt;/code>. Cela n√©cessite que vous configuriez votre gestionnaire de domaines pour pointer le domaine cible vers Microsoft Azure.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="co√ªt--pour-les-associations-profitez-du-parrainage-de-microsoft">Co√ªt : pour les associations, profitez du parrainage de Microsoft&lt;/h2>
&lt;p>Si vous √™tes une association, vous pouvez b√©n√©ficier d‚Äôun parrainage de Microsoft.&lt;/p>
&lt;p>Au moment o√π j‚Äô√©cris ces lignes, c‚Äôest &lt;strong>2000¬†dollars par an&lt;/strong> !&lt;/p>
&lt;p>Pour cette somme, vous pouvez facilement h√©berger un grand site web. Dans le cas que j‚Äôai trait√©, nous avons :&lt;/p>
&lt;ul>
&lt;li>deux serveurs MySQL,
&lt;ul>
&lt;li>le premier √† 62,33¬†$ par mois (pour le grand site web avec plus de 6000¬†pages et articles et un bon trafic r√©gulier avec un pic le samedi).&lt;/li>
&lt;li>le second √† 10,21¬†$ par mois (petit site web pour l‚Äôinstant),&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>un abonnement &lt;em>App Service&lt;/em> (taille &lt;em>Premium¬†v2 P1V2&lt;/em>) √† 75,92¬†$ par mois, ce qui est suffisant pour faire fonctionner 2¬†services d‚Äôapplication.&lt;/li>
&lt;li>un compte de stockage avec 772¬†Go de stockage Blob et 6¬†Go de stockage de fichiers (oui, l‚Äôorganisation sert beaucoup de fichiers audio, vid√©o et PDF).&lt;/li>
&lt;/ul>
&lt;p>Pour en savoir plus, consultez le site &lt;a href="https://www.microsoft.com/fr-fr/nonprofits/offers-for-nonprofits">https://www.microsoft.com/fr-fr/nonprofits/offers-for-nonprofits&lt;/a>.&lt;/p>
&lt;h2 id="maintenance-et-mises-√†-jour-avec-les-_slots_-de-d√©ploiement">Maintenance et mises √† jour avec les &lt;em>slots&lt;/em> de d√©ploiement&lt;/h2>
&lt;p>M√™me si j‚Äôai √©t√© tent√© d‚Äôutiliser une extension WordPress pour cela, je ne l‚Äôai pas fait.&lt;/p>
&lt;p>Dans les paragraphes suivants, je d√©taille les √©tapes que j‚Äôai suivies pour utiliser les &lt;em>slots&lt;/em> de d√©ploiement.&lt;/p>
&lt;h3 id="pourquoi-des-_slots_-de-d√©ploiement">Pourquoi des &lt;em>slots&lt;/em> de d√©ploiement&lt;/h3>
&lt;p>Une fois la migration du site web termin√©e, il est temps de r√©fl√©chir √† la mani√®re d‚Äôen assurer la maintenance. Cela inclut la mise √† jour du noyau de WordPress, du th√®me et des extensions.&lt;/p>
&lt;p>Bien que vous puissiez utiliser une extension, comme UpdrafPlus ou autre, je vous recommande d‚Äôutiliser les &lt;em>slots&lt;/em> de d√©ploiement, natifs de Microsoft Azure, et qui sont gratuits.&lt;/p>
&lt;p>Je suis d‚Äôaccord avec vous : c‚Äôest plus technique, mais l‚Äôabonnement les inclut.&lt;/p>
&lt;p>De plus, j‚Äôai personnellement essay√© UpdrafPlus sur Microsoft Azure et cela ne s‚Äôest pas pass√© comme je l‚Äôaurais souhait√© (verrouillage al√©atoire de la base de donn√©es si le serveur MySQL n‚Äô√©tait pas assez puissant).&lt;/p>
&lt;p>J‚Äôai partag√© ci-dessous une proc√©dure compl√®te utilis√©e pendant des mois pour cet ancien client aux √âtats-Unis. Et elle fonctionne √† merveille !&lt;/p>
&lt;h3 id="√†-propos-des-sauvegardes-dans-microsoft-azure">√Ä propos des sauvegardes dans Microsoft Azure&lt;/h3>
&lt;p>Avant de nous plonger dans la proc√©dure elle-m√™me, parlons des sauvegardes.&lt;/p>
&lt;p>Par d√©faut, votre instance de base de donn√©es et votre &lt;em>App Service&lt;/em> sont sauvegard√©s automatiquement.&lt;/p>
&lt;p>La base de donn√©es est sauvegard√©e une fois par jour, environ une heure apr√®s son heure de cr√©ation.
Vous pouvez effectuer des sauvegardes manuelles √† tout moment, dans la limite de 50 par instance.&lt;/p>
&lt;div class="jli-notice jli-notice-note" id="√Ä propos de cette limite" >
&lt;p class="jli-notice-title">√Ä propos de cette limite&lt;/p>&lt;p>Lorsque vous cr√©ez une nouvelle instance (ce qui est le cas lorsque vous effectuez une maintenance), le compteur repart √† 0.&lt;/p>
&lt;p>Vous ne serez donc jamais √† court üòÅ&lt;/p>&lt;/div>
&lt;p>L‚Äô&lt;em>App Service&lt;/em> est sauvegard√© toutes les heures. Vous pourriez mettre en place des sauvegardes manuelles, mais je n‚Äôen vois pas l‚Äôutilit√©.
De plus, il faut cr√©er un compte de stockage (co√ªts suppl√©mentaires) et le relier √† l‚Äô&lt;em>App Service&lt;/em>.&lt;/p>
&lt;p>Ne pas faire de sauvegarde manuelle du service d‚Äôapplication signifie que la synchronisation entre la base de donn√©es et le service d‚Äôapplication peut √™tre un peu d√©cal√©e.&lt;/p>
&lt;p>Pour √©viter toute perte de donn√©es, je recommande d‚Äôeffectuer une sauvegarde manuelle de la base de donn√©es juste apr√®s une sauvegarde automatique de l‚Äô&lt;em>App Service&lt;/em> (il s‚Äôagit d‚Äôune des premi√®res √©tapes de la proc√©dure).&lt;/p>
&lt;p>Abstenez-vous √©galement d‚Äôeffectuer des modifications (en dehors des mises √† jour √† effectuer) avant d‚Äôavoir termin√© les t√¢ches de maintenance.&lt;/p>
&lt;h3 id="utiliser-les-_slots_-de-d√©ploiement">Utiliser les &lt;em>slots&lt;/em> de d√©ploiement&lt;/h3>
&lt;p>Rendez-vous sur le menu &lt;code>Deployment slots&lt;/code> dans le menu vertical.&lt;/p>
&lt;p>
&lt;img src="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/deployment-slots-blade.jpg"
width="427"
height="517"
srcset="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/deployment-slots-blade_hu6f7c238f1eb67bac162fc37962a9d19b_98465_360x0_resize_q75_box.jpg 360w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/deployment-slots-blade_hu6f7c238f1eb67bac162fc37962a9d19b_98465_600x0_resize_q75_box.jpg 600w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/deployment-slots-blade_hu6f7c238f1eb67bac162fc37962a9d19b_98465_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="Disponible dans les App Services"
class="gallery-image"
data-flex-grow="82"
data-flex-basis="198px"
>
&lt;/p>
&lt;p>Une fois dans le tableau de bord, vous pouvez cr√©er un &lt;em>slot&lt;/em> √† partir de &lt;code>Add Slot&lt;/code> :&lt;/p>
&lt;p>
&lt;img src="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/deployment-slots-dashboard.jpg"
width="1334"
height="313"
srcset="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/deployment-slots-dashboard_hu54cc8172d3bf1922ad555d8c1b05b8f8_83024_360x0_resize_q75_box.jpg 360w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/deployment-slots-dashboard_hu54cc8172d3bf1922ad555d8c1b05b8f8_83024_600x0_resize_q75_box.jpg 600w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/deployment-slots-dashboard_hu54cc8172d3bf1922ad555d8c1b05b8f8_83024_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="Le tableau de bord des slots de d√©ploiement"
class="gallery-image"
data-flex-grow="426"
data-flex-basis="1022px"
>
&lt;/p>
&lt;p>Vous devrez :&lt;/p>
&lt;ul>
&lt;li>Saisir le nom du &lt;em>slot&lt;/em>. Ci-dessous, je partage la fa√ßon dont je le nomme.&lt;/li>
&lt;li>S√©lectionner l‚Äô&lt;em>App Service&lt;/em> parent √† partir duquel vous souhaitez cloner les param√®tres.&lt;/li>
&lt;/ul>
&lt;p>
&lt;img src="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/configuring-the-slot.jpg"
width="585"
height="330"
srcset="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/configuring-the-slot_hu07dc05523e4da5bad12ba1b0ff9f8f24_48058_360x0_resize_q75_box.jpg 360w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/configuring-the-slot_hu07dc05523e4da5bad12ba1b0ff9f8f24_48058_600x0_resize_q75_box.jpg 600w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/configuring-the-slot_hu07dc05523e4da5bad12ba1b0ff9f8f24_48058_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="Configuration du slot"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="425px"
>
&lt;/p>
&lt;ul>
&lt;li>Confirmez en cliquant sur &lt;code>Add&lt;/code>.&lt;/li>
&lt;/ul>
&lt;p>Apr√®s quelques secondes, le tableau de bord des &lt;em>slots&lt;/em> de d√©ploiement est mis √† jour :&lt;/p>
&lt;p>
&lt;img src="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/deployment-slots-dashboard-updated.jpg"
width="1325"
height="351"
srcset="https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/deployment-slots-dashboard-updated_hu7222e7562e96af75aedfa96189c94a8f_85105_360x0_resize_q75_box.jpg 360w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/deployment-slots-dashboard-updated_hu7222e7562e96af75aedfa96189c94a8f_85105_600x0_resize_q75_box.jpg 600w, https://jeremielitzLer.fr/post/2024-02/migrer-site-wordpress-vers-ms-azure/images/deployment-slots-dashboard-updated_hu7222e7562e96af75aedfa96189c94a8f_85105_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="Le tableau de bord des slots de d√©ploiement mis √† jour avec un slot"
class="gallery-image"
data-flex-grow="377"
data-flex-basis="905px"
>
&lt;/p>
&lt;div class="jli-notice jli-notice-note" id="Jusqu&amp;#39;en janvier 2024" >
&lt;p class="jli-notice-title">Jusqu&amp;#39;en janvier 2024&lt;/p>&lt;p>Il fallait ajouter le r√©seau virtuel au &lt;em>slot&lt;/em>, car il n‚Äô√©tait pas &lt;em>copi√©&lt;/em> par d√©faut.&lt;/p>
&lt;p>Microsoft semble avoir r√©solu ce probl√®me ! Hourra üéÜ&lt;/p>&lt;/div>
&lt;h2 id="prochaines-suivantes">Prochaines suivantes&lt;/h2>
&lt;p>J‚Äôai cr√©√© pour l‚Äôassociation qui m‚Äôa sollicit√©e &lt;a href="https://docs.google.com/spreadsheets/d/1G8uoIAh-UOGrIepgz0q-iR9WkbgJVocGeL8J9RQMpbY">une liste d‚Äôactions sur Google Sheet (en anglais)&lt;/a> que vous pouvez copier et utiliser.&lt;/p>
&lt;p>Si vous trouvez un probl√®me ou une √©tape obsol√®te, &lt;a href="https://jeremielitzLer.fr/page/contactez-moi/">faites-le-moi savoir&lt;/a>.&lt;/p>
&lt;p>Je recommande de r√©aliser cette proc√©dure tous les mois minimum. Elle prend moins d‚Äôune heure une fois que vous vous √™tes familiaris√© avec elle.&lt;/p>
&lt;h2 id="conclusion">Conclusion&lt;/h2>
&lt;p>Je suis parti de z√©ro, sans aucune exp√©rience sur Microsoft Azure. Pourtant, j‚Äôai appris assez rapidement et j‚Äôai appliqu√© les comp√©tences que je d√©tenais pour organiser les ressources correctement et mener le projet √† son terme.&lt;/p>
&lt;p>Je n‚Äôai pas tout r√©alis√©, mais j‚Äôai pos√© des questions sur ce que ces points. Le fils du responsable de l‚Äôassociation a insist√© pour que l‚Äôon utilise Microsoft Azure pour profiter du parrainage de Microsoft. Comme il occupe le poste de responsable de l‚Äôoptimisation des co√ªts et des ressources sur Microsoft Azure, le choix est tout fait.&lt;/p>
&lt;p>Il a aid√© √† mettre en place le CDN pour servir les contenus audio, vid√©o et PDF. Il a √©galement aid√© √† configurer le compte Office¬†365 d√©di√© √† l‚Äôenvoi des messages depuis le site web. En utilisant l‚Äôextension &lt;a href="https://wordpress.org/plugins/wpo365-msgraphmailer/">&lt;em>WPO365 | MICROSOFT 365 GRAPH MAILER&lt;/em>&lt;/a>, nous avons connect√© les formulaires au compte Office¬†365 pour envoyer les messages des utilisateurs du site web.&lt;/p>
&lt;p>Microsoft Azure peut √™tre intimid√© par les vastes possibilit√©s qu‚Äôil offre. C‚Äôest un √©cosyst√®me complexe et complet. Pourtant, il s‚Äôagit d‚Äôune comp√©tence pr√©cieuse et je suis heureux de l‚Äôavoir acquise.&lt;/p></description></item></channel></rss>